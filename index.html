```html
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Agency of Security of Children</title>
  <meta name="description" content="Agency of Security of Children. Public information portal and secure staff access." />
  <style>
    :root{
      --bg:#f6f7f8;
      --panel:#ffffff;
      --text:#111318;
      --muted:#6b7280;
      --line:#e5e7eb;
      --accent:#111827;
      --danger:#7f1d1d;
      --ok:#065f46;
      --shadow: 0 12px 30px rgba(17,24,39,.08);
      --radius: 16px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background: radial-gradient(1200px 600px at 20% 10%, #ffffff 0%, var(--bg) 50%, #f1f3f5 100%);
      letter-spacing: .1px;
    }

    a{color:inherit;text-decoration:none}
    button,input{font-family:inherit}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 60px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding:14px 16px;
      box-shadow: var(--shadow);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:42px;height:42px;border-radius:14px;
      border:1px solid var(--line);
      background: linear-gradient(180deg, #fff, #f3f4f6);
      display:grid;place-items:center;
      position:relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute;inset:-20px;
      background: conic-gradient(from 180deg, transparent, rgba(17,24,39,.06), transparent);
      animation: spin 8s linear infinite;
    }
    .logo span{
      position:relative;
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 1.6px;
      color:#111827;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .brand h1{margin:0;font-size:14px;font-weight:650;line-height:1.1}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}

    .nav{
      display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end
    }
    .chip{
      border:1px solid var(--line);
      background: rgba(255,255,255,.8);
      padding:8px 10px;
      border-radius: 999px;
      font-size:12px;
      color:#111827;
      transition: transform .08s ease, background .2s ease;
      cursor:pointer;
      user-select:none;
    }
    .chip:hover{transform: translateY(-1px);background:#fff}
    .chip[aria-current="page"]{border-color:#cbd5e1;background:#fff}

    .grid{
      display:grid;
      grid-template-columns: 1.4fr .9fr;
      gap: 18px;
      margin-top: 18px;
    }
    @media (max-width: 900px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      background: rgba(255,255,255,.86);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      padding:16px 18px;
      border-bottom:1px solid var(--line);
      display:flex;justify-content:space-between;align-items:flex-start;gap:12px;
    }
    .cardHeader h2{margin:0;font-size:14px;font-weight:650}
    .cardHeader .sub{margin:4px 0 0;color:var(--muted);font-size:12px;line-height:1.4}
    .cardBody{padding:18px}
    .muted{color:var(--muted)}
    .small{font-size:12px}
    .mono{font-family: var(--mono)}
    .divider{height:1px;background:var(--line);margin:14px 0}

    .notice{
      border:1px solid var(--line);
      border-radius: 14px;
      padding:12px 12px;
      background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(243,244,246,.7));
    }
    .notice strong{font-weight:650}
    .kv{
      display:grid;grid-template-columns: 150px 1fr;
      gap:8px 12px;
      font-size:12px;
      padding:12px;
      border:1px solid var(--line);
      border-radius: 14px;
      background: rgba(255,255,255,.8);
    }
    .kv div:nth-child(odd){color:var(--muted)}
    .kv div:nth-child(even){color:#111827}

    .btn{
      width:100%;
      display:inline-flex;align-items:center;justify-content:center;
      border:1px solid var(--line);
      background:#111827;
      color:#fff;
      padding:10px 12px;
      border-radius: 14px;
      font-size:12px;
      cursor:pointer;
      transition: transform .08s ease, opacity .2s ease;
    }
    .btn:hover{transform: translateY(-1px)}
    .btn:active{transform: translateY(0)}
    .btn.secondary{
      background:#fff;color:#111827;
    }

    .field{display:grid;gap:8px;margin-top:12px}
    label{font-size:12px;color:var(--muted)}
    input{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 14px;
      padding:10px 12px;
      font-size:12px;
      outline:none;
    }
    input:focus{border-color:#cbd5e1;box-shadow: 0 0 0 3px rgba(203,213,225,.45)}

    .footer{
      margin-top:14px;
      font-size:11px;
      color: var(--muted);
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    .toast{
      position:fixed;
      right:16px;
      bottom:16px;
      width:min(360px, calc(100vw - 32px));
      background: rgba(17,24,39,.92);
      color:#fff;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      padding:12px 12px;
      box-shadow: 0 18px 50px rgba(0,0,0,.22);
      display:none;
      z-index: 50;
    }
    .toast .t1{font-size:12px;font-weight:650}
    .toast .t2{font-size:12px;color:rgba(255,255,255,.75);margin-top:4px;line-height:1.35}

    .fade{
      animation: fade .18s ease both;
    }
    @keyframes fade{
      from{opacity:0;transform: translateY(4px)}
      to{opacity:1;transform: translateY(0)}
    }

    .table{
      width:100%;
      border-collapse: collapse;
      font-size:12px;
    }
    .table th,.table td{
      text-align:left;
      padding:10px 10px;
      border-bottom:1px solid var(--line);
      vertical-align:top;
    }
    .table th{color:var(--muted);font-weight:600;background: rgba(243,244,246,.6)}
    .rowLink{cursor:pointer}
    .rowLink:hover td{background: rgba(17,24,39,.03)}
    .tag{
      display:inline-flex;
      padding:4px 8px;
      border-radius: 999px;
      border:1px solid var(--line);
      font-size:11px;
      background:#fff;
    }
    .tag.ok{border-color: rgba(6,95,70,.25); color: var(--ok)}
    .tag.dim{color: var(--muted)}
    .tag.warn{border-color: rgba(127,29,29,.25); color: var(--danger)}

    .sideMenu{
      display:flex;flex-direction:column;gap:8px;
    }
    .sideItem{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 14px;
      padding:10px 12px;
      font-size:12px;
      display:flex;align-items:center;justify-content:space-between;
      cursor:pointer;
      transition: transform .08s ease, background .2s ease;
    }
    .sideItem:hover{transform: translateY(-1px);background:#fcfcfc}
    .sideItem[aria-selected="true"]{border-color:#cbd5e1;background:#fff}
    .sideItem .hint{color:var(--muted);font-size:11px}

    .ghostLine{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(17,24,39,.15), transparent);
      margin: 14px 0;
      opacity:.4;
    }

    .mask{
      position:fixed;inset:0;
      background: rgba(246,247,248,.92);
      display:none;
      z-index: 40;
    }
    .modal{
      position:fixed;inset:0;
      display:none;
      z-index: 41;
      align-items:center;justify-content:center;
      padding:18px;
    }
    .modalPanel{
      width:min(920px, 100%);
      background:#fff;
      border:1px solid var(--line);
      border-radius: 18px;
      box-shadow: 0 20px 70px rgba(17,24,39,.22);
      overflow:hidden;
    }
    .modalTop{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px
    }
    .modalTop h3{margin:0;font-size:13px;font-weight:650}
    .x{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
      font-size:12px;
    }
    .modalBody{padding:16px}
    .empty{
      border:1px dashed #d1d5db;
      border-radius: 14px;
      padding:16px;
      color: var(--muted);
      background: rgba(243,244,246,.45);
      line-height:1.5;
      font-size:12px;
    }

    .blink{
      animation: blink 2.8s steps(1,end) infinite;
    }
    @keyframes blink{
      0%, 85%{opacity:1}
      86%, 92%{opacity:.35}
      93%, 100%{opacity:1}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="topbar" role="banner">
      <div class="brand" aria-label="Agency of Security of Children">
        <div class="logo" aria-hidden="true"><span>ASC</span></div>
        <div>
          <h1>Agency of Security of Children</h1>
          <p>Public information portal and secure staff access</p>
        </div>
      </div>

      <nav class="nav" aria-label="Navigation">
        <div class="chip" data-page="home" aria-current="page">Home</div>
        <div class="chip" data-page="mission">Mission</div>
        <div class="chip" data-page="data">Public data</div>
        <div class="chip" data-page="legal">Legal framework</div>
        <div class="chip" data-page="staff">Staff access</div>
      </nav>
    </header>

    <main class="grid" id="publicGrid">
      <section class="card" id="publicCard">
        <div class="cardHeader">
          <div>
            <h2 id="publicTitle">Public statement</h2>
            <div class="sub" id="publicSub">
              The Agency supports territories in child protection operations. Our role is to ensure continuity, safety, and measurable outcomes.
            </div>
          </div>
          <div class="tag dim" id="publicTag">PUBLIC</div>
        </div>
        <div class="cardBody" id="publicBody">
          <div class="notice">
            <div class="small">
              <strong>Notice</strong><br />
              Certain resources may be temporarily unavailable during consolidation procedures.
            </div>
          </div>

          <div class="divider"></div>

          <div class="kv" aria-label="Key facts">
            <div>Coverage</div><div>National network</div>
            <div>Priority</div><div>Continuity of care</div>
            <div>Method</div><div>Standardized follow up</div>
            <div>Transparency</div><div>Public summaries only</div>
          </div>

          <div class="ghostLine"></div>

          <div class="small muted">
            Latest update: <span class="mono">AUTO</span><br />
            Some pages may display <span class="mono">Content unavailable</span> when access is not required.
          </div>
        </div>
      </section>

      <aside class="card" id="sideCard">
        <div class="cardHeader">
          <div>
            <h2>Access</h2>
            <div class="sub">Secure entry for authorized staff</div>
          </div>
          <div class="tag dim">SECURED</div>
        </div>
        <div class="cardBody">
          <div class="small muted">
            This portal logs access attempts. No password recovery is provided through the public interface.
          </div>

          <div class="divider"></div>

          <div id="loginBox">
            <div class="field">
              <label for="u">Identifier</label>
              <input id="u" inputmode="numeric" autocomplete="off" placeholder="Example: 0175" />
            </div>
            <div class="field">
              <label for="p">Password</label>
              <input id="p" type="password" autocomplete="off" placeholder="●●●●" />
            </div>

            <div style="margin-top:12px;display:grid;gap:10px">
              <button class="btn" id="loginBtn">Sign in</button>
              <button class="btn secondary" id="demoBtn" title="Prefill for testing">Prefill test access</button>
            </div>

            <div class="footer">
              <span class="mono">ASC GATE v1.0</span>
              <span class="mono">TRACE: ON</span>
            </div>
          </div>

          <div id="loggedBox" style="display:none">
            <div class="notice">
              <div class="small">
                <strong>Session</strong><br />
                Staff identity verified. Redirecting to internal environment.
              </div>
            </div>
            <div class="divider"></div>
            <button class="btn" id="enterInternalBtn">Enter internal environment</button>
          </div>
        </div>
      </aside>
    </main>

    <main id="internalGrid" style="display:none;margin-top:18px">
      <section class="card">
        <div class="cardHeader">
          <div>
            <h2>Agent profile</h2>
            <div class="sub">Internal access level is assigned by territory</div>
          </div>
          <div class="tag dim">INTERNAL</div>
        </div>
        <div class="cardBody">
          <div class="kv">
            <div>Agent</div><div><span class="mono" id="agentId">0175</span></div>
            <div>Status</div><div><span class="tag ok">Active</span></div>
            <div>Primary assignment</div><div>Atloc</div>
            <div>Clearance level</div><div>3</div>
            <div>Last sign in</div><div id="lastSignIn">Today</div>
            <div>Psych review</div><div class="blink">Not required</div>
          </div>

          <div class="divider"></div>

          <div class="small muted">
            Internal content is operational. Some records may appear empty when individual follow up is not required.
          </div>
        </div>
      </section>

      <section class="card" style="margin-top:18px">
        <div class="cardHeader">
          <div>
            <h2>Internal dashboard</h2>
            <div class="sub">Work queues are displayed by compliance priority</div>
          </div>
          <div class="tag dim">ATLOC</div>
        </div>
        <div class="cardBody" style="display:grid;grid-template-columns: 300px 1fr;gap:14px">
          <div class="sideMenu" role="tablist" aria-label="Internal sections">
            <div class="sideItem" data-tab="cases" aria-selected="true">
              <span>Minor records</span>
              <span class="hint mono">M</span>
            </div>
            <div class="sideItem" data-tab="reports" aria-selected="false">
              <span>Reports</span>
              <span class="hint mono">R</span>
            </div>
            <div class="sideItem" data-tab="incidents" aria-selected="false" id="incidentsTab">
              <span>Incidents</span>
              <span class="hint mono">I</span>
            </div>
            <div class="sideItem" data-tab="archives" aria-selected="false">
              <span>Archives</span>
              <span class="hint mono">A</span>
            </div>
            <div class="sideItem" data-tab="notes" aria-selected="false">
              <span>Internal notes</span>
              <span class="hint mono">N</span>
            </div>

            <div class="divider"></div>

            <button class="btn secondary" id="signOutBtn">Sign out</button>
          </div>

          <div>
            <div id="tab_cases">
              <div class="notice">
                <div class="small">
                  <strong>Minor records</strong><br />
                  Listing reflects operational status. Full personal histories are not displayed when follow up is not required.
                </div>
              </div>

              <div class="divider"></div>

              <table class="table" aria-label="Minor records">
                <thead>
                  <tr>
                    <th>Identifier</th>
                    <th>Age at entry</th>
                    <th>Status</th>
                    <th>Location</th>
                    <th>Observation</th>
                  </tr>
                </thead>
                <tbody id="casesTbody"></tbody>
              </table>
            </div>

            <div id="tab_reports" style="display:none">
              <div class="empty">
                Reports are consolidated at territory level.<br />
                Public interface does not provide direct access.<br />
                <span class="mono">Reason: not required</span>
              </div>
            </div>

            <div id="tab_incidents" style="display:none">
              <div class="notice">
                <div class="small">
                  <strong>Incidents</strong><br />
                  This section is restricted. Events without systemic character do not require procedural change.
                </div>
              </div>

              <div class="divider"></div>

              <table class="table" aria-label="Incidents list">
                <thead>
                  <tr>
                    <th>Code</th>
                    <th>Type</th>
                    <th>Location</th>
                    <th>Qualification</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="incidentsTbody"></tbody>
              </table>

              <div class="small muted" style="margin-top:10px">
                Some entries may be redacted per legal compliance.
              </div>
            </div>

            <div id="tab_archives" style="display:none">
              <div class="notice">
                <div class="small">
                  <strong>Archives</strong><br />
                  Search requires exact reference codes.
                </div>
              </div>

              <div class="divider"></div>

              <div class="field" style="margin-top:0">
                <label for="q">Search reference</label>
                <input id="q" class="mono" autocomplete="off" placeholder="Example: M-44703 or INC-0221" />
              </div>
              <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
                <button class="btn" style="width:auto" id="searchBtn">Search</button>
                <button class="btn secondary" style="width:auto" id="clearBtn">Clear</button>
              </div>

              <div class="divider"></div>

              <div id="searchResult" class="empty">
                No query entered.
              </div>
            </div>

            <div id="tab_notes" style="display:none">
              <div class="empty">
                Internal notes are stored per agent.<br />
                Access may be delayed during synchronization.<br />
                <span class="mono">SYNC: pending</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="mask" id="mask"></div>
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Details">
    <div class="modalPanel">
      <div class="modalTop">
        <div>
          <h3 id="modalTitle">Details</h3>
          <div class="small muted" id="modalSub">Internal record view</div>
        </div>
        <button class="x" id="closeModalBtn">Close</button>
      </div>
      <div class="modalBody" id="modalBody"></div>
    </div>
  </div>

  <div class="toast" id="toast" aria-live="polite" aria-atomic="true">
    <div class="t1" id="toastT1">Notice</div>
    <div class="t2" id="toastT2">Message</div>
  </div>

  <script>
    const state = {
      page: "home",
      logged: false,
      agent: null,
      lastSignIn: null
    };

    const pages = {
      home: {
        title: "Public statement",
        sub: "The Agency supports territories in child protection operations. Our role is to ensure continuity, safety, and measurable outcomes.",
        tag: "PUBLIC",
        body: `
          <div class="notice">
            <div class="small">
              <strong>Notice</strong><br />
              Certain resources may be temporarily unavailable during consolidation procedures.
            </div>
          </div>

          <div class="divider"></div>

          <div class="kv" aria-label="Key facts">
            <div>Coverage</div><div>National network</div>
            <div>Priority</div><div>Continuity of care</div>
            <div>Method</div><div>Standardized follow up</div>
            <div>Transparency</div><div>Public summaries only</div>
          </div>

          <div class="ghostLine"></div>

          <div class="small muted">
            Latest update: <span class="mono">AUTO</span><br />
            Some pages may display <span class="mono">Content unavailable</span> when access is not required.
          </div>
        `
      },
      mission: {
        title: "Mission",
        sub: "Protection is a process. Processes require stability. Stability requires consistency.",
        tag: "PUBLIC",
        body: `
          <div class="small">
            The Agency provides operational alignment for:
            <div class="divider"></div>
            <div class="kv">
              <div>Intake</div><div>Standard triage procedures</div>
              <div>Placement</div><div>Continuity by sector allocation</div>
              <div>Follow up</div><div>Measurable compliance checks</div>
              <div>Closure</div><div>Definitive integration status</div>
            </div>
            <div class="ghostLine"></div>
            <div class="small muted">
              Some program details are not displayed when disclosure is not required.
            </div>
          </div>
        `
      },
      data: {
        title: "Public data",
        sub: "Summary indicators are provided for transparency. Individual histories are not public.",
        tag: "PUBLIC",
        body: `
          <div class="notice">
            <div class="small">
              <strong>Public summary</strong><br />
              Data below is aggregated and may be incomplete.
            </div>
          </div>

          <div class="divider"></div>

          <div class="kv">
            <div>Active territories</div><div>42</div>
            <div>Operational capacity</div><div>Consolidated</div>
            <div>Average stability</div><div>High</div>
            <div>Unresolved cases</div><div>0</div>
          </div>

          <div class="ghostLine"></div>

          <div class="empty">
            Detailed tables are temporarily unavailable.<br />
            <span class="mono">Reason: consolidation</span>
          </div>
        `
      },
      legal: {
        title: "Legal framework",
        sub: "Compliance ensures safety. Safety ensures continuity. Continuity ensures closure.",
        tag: "PUBLIC",
        body: `
          <div class="small">
            This portal reflects statutory obligations and internal procedures.
            <div class="divider"></div>

            <div class="empty">
              Legal documents are not available through the public portal.<br />
              <span class="mono">Reason: not required</span>
            </div>

            <div class="ghostLine"></div>

            <div class="small muted">
              For official requests, contact your territory representative.
            </div>
          </div>
        `
      },
      staff: {
        title: "Staff access",
        sub: "Authorized staff only. Every attempt is recorded.",
        tag: "SECURED",
        body: `
          <div class="notice">
            <div class="small">
              <strong>Secure entry</strong><br />
              Use your assigned identifier and password.
            </div>
          </div>

          <div class="divider"></div>

          <div class="empty">
            Staff access is provided on the right panel.<br />
            No password recovery is available through the public interface.
          </div>
        `
      }
    };

    const chips = Array.from(document.querySelectorAll(".chip"));
    const publicTitle = document.getElementById("publicTitle");
    const publicSub = document.getElementById("publicSub");
    const publicTag = document.getElementById("publicTag");
    const publicBody = document.getElementById("publicBody");

    const u = document.getElementById("u");
    const p = document.getElementById("p");
    const loginBtn = document.getElementById("loginBtn");
    const demoBtn = document.getElementById("demoBtn");
    const loginBox = document.getElementById("loginBox");
    const loggedBox = document.getElementById("loggedBox");
    const enterInternalBtn = document.getElementById("enterInternalBtn");

    const publicGrid = document.getElementById("publicGrid");
    const internalGrid = document.getElementById("internalGrid");

    const agentId = document.getElementById("agentId");
    const lastSignIn = document.getElementById("lastSignIn");
    const signOutBtn = document.getElementById("signOutBtn");

    const casesTbody = document.getElementById("casesTbody");
    const incidentsTbody = document.getElementById("incidentsTbody");

    const tabs = Array.from(document.querySelectorAll(".sideItem"));
    const tabPanels = {
      cases: document.getElementById("tab_cases"),
      reports: document.getElementById("tab_reports"),
      incidents: document.getElementById("tab_incidents"),
      archives: document.getElementById("tab_archives"),
      notes: document.getElementById("tab_notes")
    };

    const toast = document.getElementById("toast");
    const toastT1 = document.getElementById("toastT1");
    const toastT2 = document.getElementById("toastT2");

    const mask = document.getElementById("mask");
    const modal = document.getElementById("modal");
    const closeModalBtn = document.getElementById("closeModalBtn");
    const modalTitle = document.getElementById("modalTitle");
    const modalSub = document.getElementById("modalSub");
    const modalBody = document.getElementById("modalBody");

    const q = document.getElementById("q");
    const searchBtn = document.getElementById("searchBtn");
    const clearBtn = document.getElementById("clearBtn");
    const searchResult = document.getElementById("searchResult");

    const CASES = [
      { id:"M-44821", age:9,  status:"Integrated", location:"Atloc", obs:"Compliant" },
      { id:"M-44703", age:14, status:"Integrated", location:"Atloc", obs:"Compliant" },
      { id:"M-44590", age:11, status:"Integrated", location:"Atloc", obs:"Compliant" },
      { id:"M-44218", age:16, status:"Integrated", location:"Atloc", obs:"Compliant" }
    ];

    const INCIDENTS = [
      { id:"INC-0221", type:"Death", location:"Atloc residential sector", qual:"Domestic accident", action:"None" },
      { id:"INC-0194", type:"Death", location:"Transport infrastructure", qual:"Isolated incident", action:"None" },
      { id:"INC-0179", type:"Fatality", location:"Service corridor", qual:"Non systemic", action:"None" }
    ];

    function setPage(key){
      state.page = key;
      chips.forEach(c => c.setAttribute("aria-current", c.dataset.page === key ? "page" : "false"));
      const data = pages[key] || pages.home;
      publicTitle.textContent = data.title;
      publicSub.textContent = data.sub;
      publicTag.textContent = data.tag;
      publicBody.innerHTML = data.body;
      publicBody.classList.remove("fade");
      void publicBody.offsetWidth;
      publicBody.classList.add("fade");
    }

    chips.forEach(ch => ch.addEventListener("click", () => setPage(ch.dataset.page)));

    function showToast(title, msg){
      toastT1.textContent = title;
      toastT2.textContent = msg;
      toast.style.display = "block";
      toast.classList.remove("fade");
      void toast.offsetWidth;
      toast.classList.add("fade");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => { toast.style.display = "none"; }, 3600);
    }

    function jitterDelay(msMin, msMax){
      const r = msMin + Math.floor(Math.random() * (msMax - msMin + 1));
      return new Promise(res => setTimeout(res, r));
    }

    function signIn(agent){
      state.logged = true;
      state.agent = agent;
      state.lastSignIn = new Date().toLocaleString(undefined, { hour:"2-digit", minute:"2-digit", day:"2-digit", month:"2-digit", year:"numeric" });

      loginBox.style.display = "none";
      loggedBox.style.display = "block";

      showToast("Session", "Identity verified. Internal environment is available.");
    }

    async function handleLogin(){
      const id = (u.value || "").trim();
      const pw = (p.value || "").trim();

      await jitterDelay(220, 620);

      if(id === "0175" && pw === "1234"){
        signIn("0175");
      } else {
        showToast("Access denied", "Unauthorized credentials. Attempt recorded.");
        p.value = "";
        p.focus();
      }
    }

    loginBtn.addEventListener("click", handleLogin);
    demoBtn.addEventListener("click", () => { u.value = "0175"; p.value = "1234"; showToast("Prefill", "Test access values inserted."); });

    [u,p].forEach(el => el.addEventListener("keydown", e => {
      if(e.key === "Enter"){ handleLogin(); }
    }));

    function populateTables(){
      casesTbody.innerHTML = "";
      CASES.forEach(row => {
        const tr = document.createElement("tr");
        tr.className = "rowLink";
        tr.innerHTML = `
          <td class="mono">${row.id}</td>
          <td>${row.age}</td>
          <td><span class="tag ok">${row.status}</span></td>
          <td>${row.location}</td>
          <td>${row.obs}</td>
        `;
        tr.addEventListener("click", () => openCase(row));
        casesTbody.appendChild(tr);
      });

      incidentsTbody.innerHTML = "";
      INCIDENTS.forEach(row => {
        const tr = document.createElement("tr");
        tr.className = "rowLink";
        tr.innerHTML = `
          <td class="mono">${row.id}</td>
          <td><span class="tag warn">${row.type}</span></td>
          <td>${row.location}</td>
          <td>${row.qual}</td>
          <td>${row.action}</td>
        `;
        tr.addEventListener("click", () => openIncident(row));
        incidentsTbody.appendChild(tr);
      });
    }

    function openModal(){
      mask.style.display = "block";
      modal.style.display = "flex";
      modal.classList.remove("fade");
      void modal.offsetWidth;
      modal.classList.add("fade");
    }
    function closeModal(){
      mask.style.display = "none";
      modal.style.display = "none";
    }
    closeModalBtn.addEventListener("click", closeModal);
    mask.addEventListener("click", closeModal);
    window.addEventListener("keydown", e => { if(e.key === "Escape") closeModal(); });

    async function openCase(row){
      modalTitle.textContent = `Minor record ${row.id}`;
      modalSub.textContent = "Internal record view";
      modalBody.innerHTML = `
        <div class="kv">
          <div>Identifier</div><div class="mono">${row.id}</div>
          <div>Status</div><div><span class="tag ok">Integrated</span></div>
          <div>Current location</div><div>Atloc</div>
          <div>Individual history</div><div class="mono">Not required</div>
          <div>Antecedents</div><div class="mono">Not applicable</div>
          <div>Current situation</div><div>Stabilized</div>
        </div>
        <div class="ghostLine"></div>
        <div class="small muted">
          This minor no longer requires individual follow up.
        </div>
      `;
      openModal();

      await jitterDelay(220, 520);
      if(Math.random() < 0.22){
        showToast("Synchronization", "Some details were removed during consolidation.");
      }
    }

    async function openIncident(row){
      modalTitle.textContent = `Incident ${row.id}`;
      modalSub.textContent = "Restricted section";
      modalBody.innerHTML = `
        <div class="kv">
          <div>Code</div><div class="mono">${row.id}</div>
          <div>Type</div><div><span class="tag warn">${row.type}</span></div>
          <div>Location</div><div>${row.location}</div>
          <div>Qualification</div><div>${row.qual}</div>
          <div>Systemic character</div><div class="mono">None</div>
          <div>Procedure change</div><div class="mono">Not required</div>
        </div>
        <div class="ghostLine"></div>
        <div class="empty">
          The event does not present a systemic character.<br />
          No procedural adjustment is required.
        </div>
      `;
      openModal();

      await jitterDelay(260, 680);
      if(row.id === "INC-0194"){
        showToast("Notice", "A related annex is unavailable.");
      }
    }

    function enterInternal(){
      if(!state.logged) return;
      publicGrid.style.display = "none";
      internalGrid.style.display = "block";
      agentId.textContent = state.agent || "0175";
      lastSignIn.textContent = state.lastSignIn || "Today";
      populateTables();
      showToast("Internal environment", "Atloc workspace loaded.");
    }
    enterInternalBtn.addEventListener("click", async () => {
      await jitterDelay(120, 420);
      enterInternal();
    });

    function signOut(){
      state.logged = false;
      state.agent = null;

      internalGrid.style.display = "none";
      publicGrid.style.display = "grid";
      loginBox.style.display = "block";
      loggedBox.style.display = "none";

      u.value = "";
      p.value = "";
      setPage("home");
      showToast("Signed out", "Session closed.");
    }
    signOutBtn.addEventListener("click", signOut);

    tabs.forEach(t => t.addEventListener("click", async () => {
      const tab = t.dataset.tab;

      tabs.forEach(x => x.setAttribute("aria-selected", x === t ? "true" : "false"));
      Object.entries(tabPanels).forEach(([k, el]) => el.style.display = (k === tab) ? "block" : "none");

      if(tab === "incidents"){
        await jitterDelay(150, 480);
        if(Math.random() < 0.3){
          showToast("Restriction", "Some incident details are withheld by compliance.");
        }
      }
    }));

    function normalizeKey(s){ return (s || "").trim().toUpperCase(); }

    async function runSearch(){
      const key = normalizeKey(q.value);
      if(!key){
        searchResult.textContent = "No query entered.";
        return;
      }

      searchResult.innerHTML = `<span class="mono">Searching</span>`;
      await jitterDelay(240, 820);

      const caseMatch = CASES.find(c => c.id === key);
      const incMatch = INCIDENTS.find(i => i.id === key);

      if(caseMatch){
        searchResult.innerHTML = `
          <div class="kv">
            <div>Reference</div><div class="mono">${caseMatch.id}</div>
            <div>State</div><div>Closed definitively</div>
            <div>Disclosure</div><div class="mono">Not required</div>
          </div>
          <div class="ghostLine"></div>
          <div class="small muted">Individual history is not accessible through this interface.</div>
        `;
        return;
      }

      if(incMatch){
        searchResult.innerHTML = `
          <div class="kv">
            <div>Reference</div><div class="mono">${incMatch.id}</div>
            <div>State</div><div>Closed</div>
            <div>Annex</div><div class="mono">Unavailable</div>
          </div>
          <div class="ghostLine"></div>
          <div class="empty">
            This record is subject to compliance restrictions.<br />
            <span class="mono">Reason: not required</span>
          </div>
        `;
        return;
      }

      await jitterDelay(160, 420);

      const genericWords = ["ENFANT","CHILD","MURDER","MEURTRE","DISPARITION","DEATH","MORT","ASE","ATLOC"];
      if(genericWords.includes(key)){
        searchResult.innerHTML = `
          <div class="empty">
            No results found.<br />
            Would you like to refine your query
          </div>
        `;
        showToast("Search", "No matching records.");
        return;
      }

      searchResult.innerHTML = `
        <div class="empty">
          No records match this reference.<br />
          This information may not have existed.
        </div>
      `;
      showToast("Search", "No matching records.");
    }

    searchBtn.addEventListener("click", runSearch);
    clearBtn.addEventListener("click", () => { q.value = ""; searchResult.textContent = "No query entered."; });
    q.addEventListener("keydown", e => { if(e.key === "Enter") runSearch(); });

    setPage("home");
  </script>
</body>
</html>
```

Si tu veux, je peux faire la v2 avec une vraie page “Incidents” qui contient un seul dossier qui “accroche” et laisse apparaître une ligne de texte impossible, puis disparaît quand tu recharges la page.
