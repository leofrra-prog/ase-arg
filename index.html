import React, { useMemo, useState } from "react";
import { motion } from "framer-motion";
import { MapPin, Train, Users, Shield, ArrowRight, Building2 } from "lucide-react";

const tabs = [
  { id: "ville", label: "La ville", icon: MapPin },
  { id: "metro", label: "Le métro", icon: Train },
  { id: "communaute", label: "Communauté", icon: Users },
  { id: "asc", label: "ASC", icon: Shield },
];

function classNames(...xs) {
  return xs.filter(Boolean).join(" ");
}

function Windows95Button({ href = "#", children }) {
  return (
    <a
      href={href}
      target={href.startsWith("http") ? "_blank" : undefined}
      rel={href.startsWith("http") ? "noreferrer" : undefined}
      className="inline-flex items-center gap-2 select-none"
      style={{
        textDecoration: "none",
      }}
    >
      <span
        className="inline-flex items-center gap-2 px-4 py-2 text-sm"
        style={{
          fontFamily:
            "ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace",
          color: "#000",
          background: "#c0c0c0",
          borderTop: "2px solid #fff",
          borderLeft: "2px solid #fff",
          borderRight: "2px solid #404040",
          borderBottom: "2px solid #404040",
          boxShadow: "inset 1px 1px 0 #dfdfdf",
        }}
      >
        <span
          aria-hidden="true"
          style={{
            width: 10,
            height: 10,
            background: "#00a000",
            border: "1px solid #006000",
          }}
        />
        {children}
      </span>
    </a>
  );
}

function useHashTab(defaultId = "ville") {
  const [active, setActive] = useState(() => {
    if (typeof window === "undefined") return defaultId;
    const h = window.location.hash.replace("#", "");
    return tabs.some((t) => t.id === h) ? h : defaultId;
  });

  React.useEffect(() => {
    const onHash = () => {
      const h = window.location.hash.replace("#", "");
      if (tabs.some((t) => t.id === h)) setActive(h);
    };
    window.addEventListener("hashchange", onHash);
    return () => window.removeEventListener("hashchange", onHash);
  }, []);

  return [active, (id) => setActive(id)];
}

function Hero() {
  return (
    <section className="relative overflow-hidden">
      <div className="absolute inset-0">
        <div className="absolute -top-48 left-1/2 h-[720px] w-[720px] -translate-x-1/2 rounded-full blur-3xl opacity-30 bg-gradient-to-b from-white to-transparent" />
        <div className="absolute -bottom-72 right-[-10%] h-[620px] w-[620px] rounded-full blur-3xl opacity-20 bg-gradient-to-b from-white to-transparent" />
      </div>

      <div className="relative mx-auto max-w-6xl px-6 pt-16 pb-10 sm:pt-24">
        <motion.div
          initial={{ opacity: 0, y: 10 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.6 }}
          className="max-w-3xl"
        >
          <p className="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80">
            <span className="h-1.5 w-1.5 rounded-full bg-white/70" />
            Dossier public officiel | Atloc CITY
          </p>
          <h1 className="mt-6 text-4xl sm:text-6xl font-semibold tracking-tight text-white">
            Atloc CITY.
            <span className="block text-white/70">Une métropole normale. Étonnamment normale.</span>
          </h1>
          <p className="mt-5 text-base sm:text-lg text-white/70 leading-relaxed">
            Au bord des plaines et des grands axes, Atloc s’étend en districts, parcs, ports urbains et
            quartiers résidentiels. Un réseau de métro très dense relie l’ensemble et les services publics
            s’organisent autour d’un seul principe. Tout le monde a le droit à une ville qui fonctionne.
          </p>

          <div className="mt-8 flex flex-col sm:flex-row gap-3">
            <a
              href="#metro"
              className="inline-flex items-center justify-center rounded-full bg-white text-black px-5 py-3 text-sm font-medium hover:bg-white/90 transition"
            >
              Voir le plan du métro <ArrowRight className="ml-2 h-4 w-4" />
            </a>
            <a
              href="#asc"
              className="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 text-white px-5 py-3 text-sm font-medium hover:bg-white/10 transition"
            >
              Découvrir l’ASC
            </a>
          </div>
        </motion.div>

        <div className="mt-10 grid gap-4 sm:grid-cols-3">
          <div className="rounded-3xl border border-white/10 bg-white/5 p-5">
            <p className="text-xs text-white/70">Population</p>
            <p className="mt-2 text-2xl text-white font-semibold">Très grande</p>
            <p className="mt-2 text-sm text-white/60">Des quartiers qui ne dorment jamais et des zones calmes qui respirent.</p>
          </div>
          <div className="rounded-3xl border border-white/10 bg-white/5 p-5">
            <p className="text-xs text-white/70">Transport</p>
            <p className="mt-2 text-2xl text-white font-semibold">7 lignes</p>
            <p className="mt-2 text-sm text-white/60">1, A, B, C, D, E et Central. Correspondances rapides.</p>
          </div>
          <div className="rounded-3xl border border-white/10 bg-white/5 p-5">
            <p className="text-xs text-white/70">Services publics</p>
            <p className="mt-2 text-2xl text-white font-semibold">Proches</p>
            <p className="mt-2 text-sm text-white/60">Communauté, aide aux habitants, et une agence dédiée à l’enfance.</p>
          </div>
        </div>
      </div>
    </section>
  );
}

function Section({ id, kicker, title, children }) {
  return (
    <section id={id} className="scroll-mt-24">
      <div className="mx-auto max-w-6xl px-6 py-16 sm:py-20">
        <div className="max-w-3xl">
          <p className="text-xs tracking-wide uppercase text-white/60">{kicker}</p>
          <h2 className="mt-3 text-3xl sm:text-4xl font-semibold tracking-tight text-white">{title}</h2>
        </div>
        <div className="mt-8">{children}</div>
      </div>
    </section>
  );
}

function CitySection() {
  return (
    <div className="grid gap-6 lg:grid-cols-12">
      <div className="lg:col-span-7 rounded-3xl border border-white/10 bg-white/5 p-6">
        <h3 className="text-lg font-semibold text-white">Une ville structurée par ses districts</h3>
        <p className="mt-3 text-sm leading-relaxed text-white/70">
          Atloc CITY est connue pour son équilibre. Un cœur très dense autour de la Gare d’Atloc,
          des boulevards qui rayonnent, puis des districts spécialisés. Tech District, Port-Verre,
          Jardin Nord, Campus Iris, Harlem et World Island.
        </p>
        <div className="mt-6 grid gap-4 sm:grid-cols-2">
          <div className="rounded-2xl border border-white/10 bg-black/20 p-4">
            <p className="text-sm font-medium text-white">Centre</p>
            <p className="mt-1 text-xs text-white/60">Gare, hôtels de ville, arcades, passages piétons, grands parcs.</p>
          </div>
          <div className="rounded-2xl border border-white/10 bg-black/20 p-4">
            <p className="text-sm font-medium text-white">Ceinture</p>
            <p className="mt-1 text-xs text-white/60">Quartiers résidentiels et ateliers. Marchés couverts et stades.</p>
          </div>
          <div className="rounded-2xl border border-white/10 bg-black/20 p-4">
            <p className="text-sm font-medium text-white">Grand Atloc</p>
            <p className="mt-1 text-xs text-white/60">Zones plus vastes. Ligne E vers les reliefs et l’île futuriste.</p>
          </div>
          <div className="rounded-2xl border border-white/10 bg-black/20 p-4">
            <p className="text-sm font-medium text-white">Trame verte</p>
            <p className="mt-1 text-xs text-white/60">Parcs continus. Canaux et jardins, même au pied des tours.</p>
          </div>
        </div>
      </div>

      <div className="lg:col-span-5 rounded-3xl border border-white/10 bg-white/5 p-6">
        <div className="flex items-start justify-between">
          <div>
            <p className="text-xs text-white/60">À retenir</p>
            <h3 className="mt-1 text-lg font-semibold text-white">Atloc en trois points</h3>
          </div>
          <Building2 className="h-5 w-5 text-white/70" />
        </div>
        <ul className="mt-5 space-y-4 text-sm text-white/70">
          <li className="rounded-2xl border border-white/10 bg-black/20 p-4">
            Une identité discrète, des services clairs et une signalétique cohérente.
          </li>
          <li className="rounded-2xl border border-white/10 bg-black/20 p-4">
            Un métro pensé pour les correspondances. Communauté est un point clé.
          </li>
          <li className="rounded-2xl border border-white/10 bg-black/20 p-4">
            Un tissu associatif actif, coordonné depuis le bâtiment Communauté.
          </li>
        </ul>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-4">
          <p className="text-xs text-white/60">Note de service</p>
          <p className="mt-1 text-sm text-white/70">
            Pour toute demande d’orientation, le guichet unique est situé au niveau 1 du bâtiment
            Communauté, place des Correspondances.
          </p>
        </div>
      </div>
    </div>
  );
}

function MetroMap() {
  const lines = useMemo(
    () => [
      {
        id: "1",
        name: "Ligne 1",
        color: "#ffffff",
        stations: [
          "Gare d’Atloc",
          "Boulevard Atlas",
          "Arcades",
          "Cité-Verre",
          "Port-Verre",
          "Jardin Nord",
          "Iris",
          "Minecraftia Center",
          "Falaise Est",
        ],
      },
      {
        id: "A",
        name: "Ligne A",
        color: "#ff3b30",
        stations: [
          "Gare d’Atloc",
          "Atloc Palace",
          "Entrée Pierre",
          "Aurore Town",
          "Harlem",
          "Communauté",
          "Atloc SUD",
          "South Hill",
        ],
      },
      {
        id: "B",
        name: "Ligne B",
        color: "#0a84ff",
        stations: [
          "Auror Complex",
          "Saint Paul",
          "Esplanade",
          "Aurore Airport",
          "Tech District",
          "Nova Ring",
        ],
      },
      {
        id: "C",
        name: "Ligne C",
        color: "#32d74b",
        stations: [
          "Flower Heights",
          "Aurore Airport",
          "Esplanade",
          "Aurore Town",
          "Iris",
          "Minecraftia Center",
          "Observatoire",
        ],
      },
      {
        id: "D",
        name: "Ligne D",
        color: "#bf5af2",
        stations: [
          "Minecraftia Est",
          "Canal Sud",
          "Atloc SUD",
          "Docks",
          "Port-Verre",
        ],
      },
      {
        id: "E",
        name: "Ligne E",
        color: "#af52de",
        stations: [
          "Aurore Town",
          "Harlem",
          "South Hill",
          "World Island",
          "Spire",
          "Horizon",
        ],
      },
      {
        id: "CEN",
        name: "Central Line",
        color: "#ffd60a",
        stations: [
          "Cité-Verre",
          "Arcades",
          "Place des Correspondances",
          "Communauté",
          "Esplanade",
          "Tech District",
          "Campus Iris",
          "Minecraftia Center",
        ],
      },
    ],
    []
  );

  const [focus, setFocus] = useState("CEN");

  const focusLine = lines.find((l) => l.id === focus) || lines[0];

  return (
    <div className="grid gap-6 lg:grid-cols-12">
      <div className="lg:col-span-7 rounded-3xl border border-white/10 bg-white/5 p-6">
        <div className="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3">
          <div>
            <h3 className="text-lg font-semibold text-white">Plan schématique</h3>
            <p className="mt-1 text-sm text-white/60">
              Correspondance majeure à <span className="text-white">Communauté</span> entre la Ligne A et la Central Line.
              La Ligne 1 démarre à <span className="text-white">Gare d’Atloc</span>.
            </p>
          </div>
          <div className="flex flex-wrap gap-2">
            {lines.map((l) => (
              <button
                key={l.id}
                onClick={() => setFocus(l.id)}
                className={classNames(
                  "rounded-full px-3 py-1 text-xs border transition",
                  focus === l.id
                    ? "bg-white text-black border-white"
                    : "bg-white/5 text-white border-white/15 hover:bg-white/10"
                )}
              >
                {l.id === "CEN" ? "Central" : l.id}
              </button>
            ))}
          </div>
        </div>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-4 overflow-hidden">
          <svg viewBox="0 0 900 520" className="w-full h-auto">
            <defs>
              <filter id="softGlow">
                <feGaussianBlur stdDeviation="2" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>

            {/* Background grid */}
            <g opacity="0.15">
              {Array.from({ length: 18 }).map((_, i) => (
                <line
                  key={`v${i}`}
                  x1={40 + i * 45}
                  y1={20}
                  x2={40 + i * 45}
                  y2={500}
                  stroke="#fff"
                  strokeWidth="1"
                />
              ))}
              {Array.from({ length: 11 }).map((_, i) => (
                <line
                  key={`h${i}`}
                  x1={20}
                  y1={40 + i * 45}
                  x2={880}
                  y2={40 + i * 45}
                  stroke="#fff"
                  strokeWidth="1"
                />
              ))}
            </g>

            {/* Lines */}
            <g filter="url(#softGlow)" strokeLinecap="round" strokeLinejoin="round">
              {/* Ligne 1 */}
              <path
                d="M120 110 L240 110 L315 155 L355 235 L430 285 L510 285 L600 320 L740 340"
                stroke="#fff"
                strokeWidth={focus === "1" ? 10 : 6}
                opacity={focus === "1" ? 1 : 0.35}
                fill="none"
              />

              {/* Ligne A */}
              <path
                d="M120 110 L200 165 L245 215 L290 260 L340 305 L415 330 L500 385 L610 440"
                stroke="#ff3b30"
                strokeWidth={focus === "A" ? 10 : 6}
                opacity={focus === "A" ? 1 : 0.35}
                fill="none"
              />

              {/* Central Line */}
              <path
                d="M355 235 L315 155 L270 115 L365 165 L415 330 L520 265 L630 210 L600 320"
                stroke="#ffd60a"
                strokeWidth={focus === "CEN" ? 10 : 6}
                opacity={focus === "CEN" ? 1 : 0.35}
                fill="none"
              />

              {/* Ligne B */}
              <path
                d="M540 120 L610 155 L670 190 L720 240 L770 290 L830 330"
                stroke="#0a84ff"
                strokeWidth={focus === "B" ? 10 : 6}
                opacity={focus === "B" ? 1 : 0.35}
                fill="none"
              />

              {/* Ligne C */}
              <path
                d="M670 470 L720 240 L670 190 L530 250 L450 320 L510 400"
                stroke="#32d74b"
                strokeWidth={focus === "C" ? 10 : 6}
                opacity={focus === "C" ? 1 : 0.35}
                fill="none"
              />

              {/* Ligne D */}
              <path
                d="M820 455 L740 420 L600 320 L535 360 L430 285"
                stroke="#bf5af2"
                strokeWidth={focus === "D" ? 10 : 6}
                opacity={focus === "D" ? 1 : 0.35}
                fill="none"
              />

              {/* Ligne E */}
              <path
                d="M530 250 L450 320 L610 440 L740 420 L835 380 L860 335"
                stroke="#af52de"
                strokeWidth={focus === "E" ? 10 : 6}
                opacity={focus === "E" ? 1 : 0.35}
                fill="none"
              />
            </g>

            {/* Stations */}
            <g>
              {(
                [
                  { x: 120, y: 110, name: "Gare d’Atloc", key: "gare" },
                  { x: 315, y: 155, name: "Arcades", key: "arcades" },
                  { x: 355, y: 235, name: "Cité-Verre", key: "cite" },
                  { x: 415, y: 330, name: "Communauté", key: "communaute" },
                  { x: 600, y: 320, name: "Minecraftia Center", key: "center" },
                  { x: 670, y: 190, name: "Esplanade", key: "esplanade" },
                  { x: 720, y: 240, name: "Aurore Airport", key: "airport" },
                  { x: 770, y: 290, name: "Tech District", key: "tech" },
                  { x: 610, y: 440, name: "South Hill", key: "south" },
                  { x: 740, y: 420, name: "World Island", key: "island" },
                ]
              ).map((s) => {
                const isMajor = s.key === "communaute" || s.key === "gare";
                const isInterchange = s.key === "communaute";
                return (
                  <g key={s.key}>
                    <circle
                      cx={s.x}
                      cy={s.y}
                      r={isMajor ? 9 : 6}
                      fill="#0b0b0f"
                      stroke="#fff"
                      strokeWidth={isMajor ? 3 : 2}
                      opacity={isInterchange ? 1 : 0.95}
                    />
                    {isInterchange && (
                      <circle
                        cx={s.x}
                        cy={s.y}
                        r={16}
                        fill="none"
                        stroke="#fff"
                        strokeWidth="1"
                        opacity="0.35"
                      />
                    )}
                    <text
                      x={s.x + 14}
                      y={s.y - 10}
                      fontSize="12"
                      fill="#fff"
                      opacity="0.85"
                      style={{ fontFamily: "ui-sans-serif, system-ui" }}
                    >
                      {s.name}
                    </text>
                  </g>
                );
              })}
            </g>

            {/* Legend */}
            <g transform="translate(26 430)">
              <rect x="0" y="0" width="265" height="70" rx="14" fill="rgba(0,0,0,0.35)" stroke="rgba(255,255,255,0.18)" />
              <text x="14" y="26" fontSize="12" fill="#fff" opacity="0.8" style={{ fontFamily: "ui-sans-serif, system-ui" }}>
                Légende
              </text>
              <g transform="translate(14 36)">
                {[
                  { label: "Ligne 1", c: "#fff" },
                  { label: "Ligne A", c: "#ff3b30" },
                  { label: "Central", c: "#ffd60a" },
                ].map((it, idx) => (
                  <g key={it.label} transform={`translate(${idx * 84} 0)`}>
                    <line x1="0" y1="10" x2="24" y2="10" stroke={it.c} strokeWidth="6" strokeLinecap="round" />
                    <text x="30" y="14" fontSize="11" fill="#fff" opacity="0.8" style={{ fontFamily: "ui-sans-serif, system-ui" }}>
                      {it.label}
                    </text>
                  </g>
                ))}
              </g>
            </g>
          </svg>
        </div>

        <div className="mt-5 text-xs text-white/55">
          Ce plan est fictif et schématique. Il représente la logique du réseau et les correspondances majeures.
        </div>
      </div>

      <div className="lg:col-span-5 rounded-3xl border border-white/10 bg-white/5 p-6">
        <div className="flex items-start justify-between">
          <div>
            <p className="text-xs text-white/60">Ligne sélectionnée</p>
            <h3 className="mt-1 text-lg font-semibold text-white">{focusLine.name}</h3>
          </div>
          <div className="h-8 w-8 rounded-full" style={{ background: focusLine.color, opacity: 0.9 }} />
        </div>

        <ol className="mt-5 space-y-3">
          {focusLine.stations.map((st, i) => {
            const isComm = st.toLowerCase().includes("communaut");
            const isGare = st.toLowerCase().includes("gare d’atl") || st.toLowerCase().includes("gare d'atl");
            return (
              <li
                key={`${focusLine.id}-${st}`}
                className={classNames(
                  "rounded-2xl border p-4",
                  isComm || isGare
                    ? "border-white/20 bg-black/20"
                    : "border-white/10 bg-black/10"
                )}
              >
                <div className="flex items-center justify-between gap-3">
                  <div>
                    <p className="text-sm text-white">
                      <span className="text-white/50 mr-2">{String(i + 1).padStart(2, "0")}</span>
                      {st}
                    </p>
                    {(isComm || isGare) && (
                      <p className="mt-1 text-xs text-white/60">
                        {isComm
                          ? "Nœud de correspondance A ↔ Central, accès direct au bâtiment Communauté."
                          : "Point de départ officiel de la Ligne 1 et grand échangeur urbain."}
                      </p>
                    )}
                  </div>
                  <span
                    className="h-3 w-3 rounded-full"
                    style={{ background: focusLine.color, opacity: isComm || isGare ? 1 : 0.6 }}
                    aria-hidden="true"
                  />
                </div>
              </li>
            );
          })}
        </ol>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-4">
          <p className="text-xs text-white/60">Info service</p>
          <p className="mt-1 text-sm text-white/70">
            Les trains circulent en boucle élargie sur Central Line, avec renforts aux heures de pointe.
          </p>
        </div>
      </div>
    </div>
  );
}

function CommunauteSection() {
  return (
    <div className="grid gap-6 lg:grid-cols-12">
      <div className="lg:col-span-7 rounded-3xl border border-white/10 bg-white/5 p-6">
        <h3 className="text-lg font-semibold text-white">Bâtiment Communauté</h3>
        <p className="mt-3 text-sm leading-relaxed text-white/70">
          Communauté est un immeuble public, au-dessus de la station Communauté. Il est conçu pour orienter,
          aider et équiper les habitants d’Atloc. Un accueil fluide, des équipes disponibles et des parcours
          simples. Tout est pensé pour que tu trouves rapidement la bonne porte.
        </p>

        <div className="mt-6 grid gap-4 sm:grid-cols-2">
          {["Accueil et orientation", "Aides administratives", "Emploi et formation", "Santé et bien-être", "Logement", "Médiation", "Ateliers et ressources", "Toit-terrasse public"].map(
            (label, idx) => (
              <div key={label} className="rounded-2xl border border-white/10 bg-black/20 p-4">
                <p className="text-xs text-white/60">Étage {idx + 1}</p>
                <p className="mt-1 text-sm text-white">{label}</p>
              </div>
            )
          )}
        </div>
      </div>

      <div className="lg:col-span-5 rounded-3xl border border-white/10 bg-white/5 p-6">
        <h3 className="text-lg font-semibold text-white">Services disponibles</h3>
        <div className="mt-5 space-y-3 text-sm">
          {[
            { t: "Guichet unique", d: "Une entrée, un tri rapide, une réponse claire." },
            { t: "Aide d’urgence", d: "Orientation immédiate selon la situation." },
            { t: "Réseau associatif", d: "Partenaires locaux, suivi et continuité." },
            { t: "Espace numérique", d: "Postes, impressions, démarches accompagnées." },
          ].map((it) => (
            <div key={it.t} className="rounded-2xl border border-white/10 bg-black/20 p-4">
              <p className="text-white font-medium">{it.t}</p>
              <p className="mt-1 text-white/60 text-xs">{it.d}</p>
            </div>
          ))}
        </div>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-4">
          <p className="text-xs text-white/60">Accès</p>
          <p className="mt-1 text-sm text-white/70">
            Station Communauté. Correspondance directe Ligne A et Central Line. Entrées nord et sud
            via la place des Correspondances.
          </p>
        </div>
      </div>
    </div>
  );
}

function ASCSection() {
  return (
    <div className="grid gap-6 lg:grid-cols-12">
      <div className="lg:col-span-7 rounded-3xl border border-white/10 bg-white/5 p-6">
        <h3 className="text-lg font-semibold text-white">Agency of Security of Children</h3>
        <p className="mt-3 text-sm leading-relaxed text-white/70">
          L’ASC est une agence publique d’Atloc, reconnue pour son approche humaine. Son rôle est simple.
          Protéger, accompagner et reconstruire. Les interventions se font avec calme, précision et respect.
          Chaque équipe associe agents, médiateurs, soignants et partenaires locaux.
        </p>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-5">
          <p className="text-xs text-white/60">Rapport récent | Campagne lointaine</p>
          <p className="mt-2 text-white font-medium">
            Cinq enfants portés disparus. Retrouvés sains et saufs.
          </p>
          <p className="mt-2 text-sm text-white/70 leading-relaxed">
            Cette semaine, un signalement a déclenché une recherche dans une zone rurale isolée.
            L’agent <span className="text-white">0175</span> a coordonné la progression sur terrain difficile,
            avec l’appui d’équipes locales. Les cinq enfants ont été localisés, mis en sécurité et
            pris en charge. Un suivi est en place, avec un plan de soutien à long terme.
          </p>
          <div className="mt-4 grid gap-3 sm:grid-cols-3">
            {["Écoute", "Sécurité", "Continuité"].map((w) => (
              <div key={w} className="rounded-2xl border border-white/10 bg-black/30 p-3">
                <p className="text-sm text-white">{w}</p>
                <p className="mt-1 text-xs text-white/60">Une méthode stable, même en urgence.</p>
              </div>
            ))}
          </div>
        </div>
      </div>

      <div className="lg:col-span-5 rounded-3xl border border-white/10 bg-white/5 p-6">
        <h3 className="text-lg font-semibold text-white">Connexion</h3>
        <p className="mt-3 text-sm text-white/70 leading-relaxed">
          Accès réservé aux portails partenaires. Si tu as déjà le lien, tu peux te connecter.
          Sinon, passe par Communauté pour être orienté.
        </p>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-5">
          <p className="text-xs text-white/60">Portail sécurisé</p>
          <div className="mt-3">
            <Windows95Button href=\"https://leofrra-prog.github.io/ase-arg-2/\">\n              connexion\n            </Windows95Button>
          </div>
          <p className="mt-3 text-xs text-white/55">
            Remplace le lien dans le code par l’URL que tu m’as donnée.
          </p>
        </div>

        <div className="mt-6 rounded-2xl border border-white/10 bg-black/20 p-5">
          <p className="text-xs text-white/60">Contact</p>
          <p className="mt-2 text-sm text-white/70">
            Urgence enfance 24h. Antenne principale, district Centre. Déploiement mobile sur Grand Atloc.
          </p>
        </div>
      </div>
    </div>
  );
}

function TopNav() {
  const [active] = useHashTab("ville");
  return (
    <div className="sticky top-0 z-50 backdrop-blur-xl bg-black/40 border-b border-white/10">
      <div className="mx-auto max-w-6xl px-6">
        <div className="flex items-center justify-between h-14">
          <a href="#ville" className="flex items-center gap-2 text-white font-semibold tracking-tight">
            <span className="h-2 w-2 rounded-full bg-white/80" />
            Atloc CITY
          </a>
          <nav className="hidden sm:flex items-center gap-1">
            {tabs.map((t) => {
              const Icon = t.icon;
              const isActive = active === t.id;
              return (
                <a
                  key={t.id}
                  href={`#${t.id}`}
                  className={classNames(
                    "inline-flex items-center gap-2 rounded-full px-3 py-2 text-sm transition",
                    isActive ? "bg-white text-black" : "text-white/80 hover:bg-white/10"
                  )}
                >
                  <Icon className="h-4 w-4" />
                  {t.label}
                </a>
              );
            })}
          </nav>
          <a
            href="#communaute"
            className="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 text-white px-4 py-2 text-sm font-medium hover:bg-white/10 transition"
          >
            Entrer
          </a>
        </div>
      </div>
    </div>
  );
}

function Footer() {
  return (
    <footer className="border-t border-white/10 bg-black/30">
      <div className="mx-auto max-w-6xl px-6 py-10">
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <p className="text-xs text-white/60">© Atloc CITY. Dossier public. Version fictive.</p>
          <div className="flex items-center gap-4 text-xs text-white/60">
            <a className="hover:text-white" href="#ville">Ville</a>
            <a className="hover:text-white" href="#metro">Métro</a>
            <a className="hover:text-white" href="#communaute">Communauté</a>
            <a className="hover:text-white" href="#asc">ASC</a>
          </div>
        </div>
      </div>
    </footer>
  );
}

export default function AtlocCitySite() {
  return (
    <div className="min-h-screen bg-[#05050a] text-white">
      <div className="absolute inset-0 -z-10 bg-gradient-to-b from-white/10 via-transparent to-transparent" />
      <TopNav />
      <Hero />

      <Section id="ville" kicker="Atloc CITY" title="Une grande ville. Une grande histoire.">
        <CitySection />
      </Section>

      <Section id="metro" kicker="Réseau urbain" title="Le métro d’Atloc">
        <MetroMap />
      </Section>

      <Section id="communaute" kicker="Guichet unique" title="Communauté">
        <CommunauteSection />
      </Section>

      <Section id="asc" kicker="Protection de l’enfance" title="ASC">
        <ASCSection />
      </Section>

      <Footer />
    </div>
  );
}
